<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <constant name="struts.multipart.maxSize" value="1000000" />

    <package name="default" namespace="/" extends="json-default">
        <global-results>
            <result name="error">
                /jsp/error/error.jsp
            </result>
        </global-results>
        <action name="getUnreadMessagesAmount" class="com.shooting_stars.project.command.GetUnreadMessagesAmountCommand">
            <result type="json" />
        </action>
        <action name="login" class="com.shooting_stars.project.command.LoginCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
            <result name="login_failed">
                /index.jsp
            </result>
            <result name="input">
                /index.jsp
            </result>
        </action>
        <action name="logout" class="com.shooting_stars.project.command.LogoutCommand">
            <result name="success">
                /index.jsp
            </result>
        </action>
        <action name="changeLocale" class="com.shooting_stars.project.command.ChangeLocaleCommand">
            <result name="success">
                /index.jsp
            </result>
        </action>
        <action name="userPage" class="com.shooting_stars.project.command.FormUserPageCommand">
            <result name="user">
                /jsp/profile.jsp
            </result>
            <result name="other_user">
                /jsp/userPage.jsp
            </result>
        </action>

        <action name="registration" class="com.shooting_stars.project.command.PreparingRegistrationCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
            <result name="step1">
                /jsp/registration1.jsp
            </result>
            <result name="step2">
                /jsp/registration2.jsp
            </result>
            <result name="step3">
                /jsp/registration3.jsp
            </result>
        </action>

        <action name="changePhoto" class="com.shooting_stars.project.command.ChangePhotoCommand">
            <interceptor-ref name="fileUpload">
                <param name="allowedTypes">image/jpeg, image/png, image/jpg</param>
                <param name="maximumSize">5000000</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="validation"/>
            <interceptor-ref name="workflow"/>
             <result name="success" type="redirectAction">
                 userPage
             </result>
            <result name="input">
                /jsp/changingData/changePhoto.jsp
            </result>
        </action>

        <action name="saveWishes" class="com.shooting_stars.project.command.SaveWishesCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
        </action>
        <action name="deleteWish" class="com.shooting_stars.project.command.DeleteWishCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
        </action>
        <action name="acceptApplication" class="com.shooting_stars.project.command.AcceptApplicationCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
        </action>
        <action name="cancelMakingWish" class="com.shooting_stars.project.command.CancelMakingWishCommand">
            <result name="success" type="redirectAction">
                userPage
            </result>
        </action>
        <action name="cancelApplication" class="com.shooting_stars.project.command.CancelApplicationCommand">
            <result name="success" type="redirectAction" >
                userPage?userId=${userId}
            </result>
            <result name="myPage" type="redirectAction" >
                fulfilledWishes?userId=${currentUserId}
            </result>
        </action>
        <action name="makeApplication" class="com.shooting_stars.project.command.MakeApplicationCommand">
            <result name="success" type="redirectAction" >
                userPage?userId=${userId}
            </result>
        </action>
        <action name="wishMade" class="com.shooting_stars.project.command.MarkWishMadeCommand">
            <result name="success" type="redirectAction" >
                userPage
            </result>
        </action>
        <action name="myFulfilledWishes" class="com.shooting_stars.project.command.GetUsersWishesFulfilledCommand">
            <result name="success">
                /jsp/myFulfilledWishes.jsp
            </result>
        </action>
        <action name="fulfilledWishes" class="com.shooting_stars.project.command.GetWishesUserParticipatesInCommand">
            <result name="success">
                /jsp/myWishes.jsp
            </result>
        </action>
        <action name="editUserInfo" class="com.shooting_stars.project.command.EditUserInfoCommand">
            <result name="success">
                /jsp/infoEditor.jsp
            </result>
        </action>
        <action name="saveEditedUserInfo" class="com.shooting_stars.project.command.SaveEditedUserInfoCommand">
            <result name="success" type="redirectAction" >
                userPage
            </result>
            <result name="input">
                /jsp/infoEditor.jsp
            </result>
        </action>
        <action name="editUserAbilities" class="com.shooting_stars.project.command.EditUserAbilitiesCommand">
            <result name="success">
                /jsp/abilitiesEditor.jsp
            </result>
        </action>
        <action name="saveEditedUserAbilities" class="com.shooting_stars.project.command.SaveEditedUserAbilitiesCommand">
            <result name="success" type="redirectAction" >
                userPage
            </result>
        </action>
        <action name="getChats" class="com.shooting_stars.project.command.GetUserChatsCommand">
            <result name="success"  >
                /jsp/chats.jsp
            </result>
        </action>


        <action name="updateChats" class="com.shooting_stars.project.command.GetUserChatsCommand">
            <result type="json"/>
        </action>

        <action name="sendMessage" class="com.shooting_stars.project.command.SendMessageCommand">
            <result name="success" type="redirectAction">
                getMessages?chatId=${chatId}
            </result>
            <result name="input">
                getMessages?chatId=${chatId}
            </result>
        </action>

        <action name="getMessages" class="com.shooting_stars.project.command.GetMessagesCommand">
            <result name="success">
                /jsp/messages.jsp
            </result>
            <result name="input" type="redirectAction">
                index.jsp
            </result>
        </action>

        <action name="toChat" class="com.shooting_stars.project.command.GoToChatCommand">
            <result name="success" type="redirectAction">
                getMessages?chatId=${chatId}
            </result>
        </action>
        <action name="usersSearch" class="com.shooting_stars.project.command.UsersSearchCommand">
            <result name="success">
                /jsp/search.jsp
            </result>
            <result name="input">
                /jsp/search.jsp
            </result>
        </action>
        <action name="changePassword" class="com.shooting_stars.project.command.ChangePasswordCommand">
            <result name="success">
                /jsp/changePassword.jsp
            </result>
            <result name="input">
                /jsp/changePassword.jsp
            </result>
        </action>
        <action name="newMessages" class="com.shooting_stars.project.command.GetUnreadMessagesCommand">
            <result type="json"/>
        </action>
        <!--
        <action name="getUnreadMessagesAmount" class="com.shooting_stars.project.command.GetUnreadMessagesAmountCommand">
            <result type="json">
                /index.jsp
            </result>
        </action> -->
</package>

</struts>